(function(A){var u=function(){};u.__name__=!0;u.remove=function(b,a){var c=b.indexOf(a);if(-1==c)return!1;b.splice(c,1);return!0};var F=function(){};F.__name__=!0;F.main=function(){var b=new B,a=window.document.getElementById("canvas"),c=new THREE.Scene,d=new THREE.MeshLambertMaterial({color:13369344}),e=new THREE.Mesh(new THREE.BoxGeometry(50,50,50,1,1,1),d);e.position.set(0,0,0);c.add(e);var f=new h(4);f[0]=-25;f[1]=-25;f[2]=-25;var g=new h(4);g[0]=-25;g[1]=-25;g[2]=25;var k=new h(4);k[0]=-25;k[1]=
25;k[2]=-25;var C=new h(4);C[0]=-25;C[1]=25;C[2]=25;var w=new h(4);w[0]=25;w[1]=-25;w[2]=-25;var D=new h(4);D[0]=25;D[1]=-25;D[2]=25;var n=new h(4);n[0]=25;n[1]=25;n[2]=-25;var p=new h(4);p[0]=25;p[1]=25;p[2]=25;var q=new x([f,g,k,C,w,D,n,p]),l=new THREE.Mesh(new THREE.SphereGeometry(20),new THREE.MeshLambertMaterial({color:204}));l.position.set(50,0,0);c.add(l);f=new h(4);f[0]=50;f[1]=0;f[2]=0;var m=new y(f,20),f=new THREE.PointLight(16777215,1,0);f.position.set(100,200,50);c.add(f);f=new THREE.AmbientLight(4210752);
c.add(f);var r=new THREE.PerspectiveCamera(70,a.clientWidth/a.clientHeight,1,1E3);r.position.set(75*Math.cos(Math.PI/4),75,75*Math.sin(Math.PI/4));r.lookAt(e.position);c.add(r);var t=new THREE.WebGLRenderer({canvas:a});t.setSize(window.document.body.clientWidth,window.document.body.clientHeight);t.setClearColor(16777215);window.document.body.appendChild(t.domElement);var u=0,v=null,v=function(a){window.requestAnimationFrame(v);r.aspect=window.document.body.clientWidth/window.document.body.clientHeight;
t.setSize(window.document.body.clientWidth,window.document.body.clientHeight);r.updateProjectionMatrix();l.position.x=50*Math.sin(2*Math.PI*u*.1);l.position.y=50*Math.sin(4*Math.PI*u*.1);l.position.z=50*Math.sin(8*Math.PI*u*.1);m.get_centre()[0]=l.position.x;m.get_centre()[1]=l.position.y;m.get_centre()[2]=l.position.z;a=b.test(q,m);d.setValues({color:a?52224:13369344});t.render(c,r);u+=.016666666666666666;return!0};v(0)};Math.__name__=!0;var E=function(){};E.__name__=!0;E.string=function(b){return k.__string_rec(b,
"")};var p=function(){};p.__name__=!0;p.lerp=function(b,a,c){return b+c*(a-b)};p.translate=function(b,a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;a[12]=b[0];a[13]=b[1];a[14]=b[2];return a};p.rotate=function(b,a){var c=b[0]+b[0],d=b[1]+b[1],e=b[2]+b[2],f=b[0]*c,g=b[0]*d,h=b[0]*e,k=b[1]*d,w=b[1]*e,l=b[2]*e,c=b[3]*c,d=b[3]*d,e=b[3]*e;a[0]=1-(k+l);a[4]=g-e;a[8]=h+d;a[12]=0;a[1]=g+e;a[5]=1-(f+l);a[9]=w-c;a[13]=0;a[2]=h-d;a[6]=
w+c;a[10]=1-(f+k);a[14]=0;a[3]=0;a[7]=0;a[11]=0;a[15]=1;return a};p.scale=function(b,a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;a[0]=b[0];a[5]=b[1];a[10]=b[2];return a};p.transform=function(b,a,c,d){var e=a[0]+a[0],f=a[1]+a[1],g=a[2]+a[2],h=a[0]*e,k=a[0]*f,l=a[0]*g,p=a[1]*f,n=a[1]*g,m=a[2]*g,e=a[3]*e,f=a[3]*f;a=a[3]*g;d[0]=(1-(p+m))*c[0];d[1]=(k+a)*c[0];d[2]=(l-f)*c[0];d[3]=0;d[4]=(k-a)*c[1];d[5]=(1-(h+m))*c[1];d[6]=(n+
e)*c[1];d[7]=0;d[8]=(l+f)*c[2];d[9]=(n-e)*c[2];d[10]=(1-(h+p))*c[2];d[11]=0;d[12]=b[0];d[13]=b[1];d[14]=b[2];d[15]=1;return d};p.lookAt=function(b,a,c,d){var e,f,g,h,k,l,m,n;if(Math.abs(b[0]-a[0])<p.EPSILON&&Math.abs(b[1]-a[1])<p.EPSILON&&Math.abs(b[2]-a[2])<p.EPSILON)return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d;k=b[0]-a[0];l=b[1]-a[1];m=b[2]-a[2];n=1/Math.sqrt(k*k+l*l+m*m);k*=n;l*=n;m*=n;a=c[1]*m-c[2]*l;e=c[2]*k-c[0]*
m;c=c[0]*l-c[1]*k;n=Math.sqrt(a*a+e*e+c*c);n<=p.EPSILON?c=e=a=0:(n=1/n,a*=n,e*=n,c*=n);f=l*c-m*e;g=m*a-k*c;h=k*e-l*a;n=Math.sqrt(f*f+g*g+h*h);n<=p.EPSILON?h=g=f=0:(n=1/n,f*=n,g*=n,h*=n);d[0]=a;d[1]=f;d[2]=k;d[3]=0;d[4]=e;d[5]=g;d[6]=l;d[7]=0;d[8]=c;d[9]=h;d[10]=m;d[11]=0;d[12]=-(a*b[0]+e*b[1]+c*b[2]);d[13]=-(f*b[0]+g*b[1]+h*b[2]);d[14]=-(k*b[0]+l*b[1]+m*b[2]);d[15]=1;return d};p.perspective=function(b,a,c,d,e){b=1/Math.tan(b/2);var f=1/(c-d);e[0]=b/a;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=b;e[6]=0;e[7]=
0;e[8]=0;e[9]=0;e[10]=(d+c)*f;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*d*c*f;e[15]=0;return e};p.orthographic=function(b,a,c,d,e,f,g){null==f&&(f=1);null==e&&(e=-1);var h=1/(a-b),k=1/(d-c),l=1/(f-e);g[0]=2*h;g[4]=0;g[8]=0;g[12]=-1*(b+a)*h;g[1]=0;g[5]=2*k;g[9]=0;g[13]=-1*(d+c)*k;g[2]=0;g[6]=0;g[10]=-2*l;g[14]=-1*(f+e)*l;g[3]=0;g[7]=0;g[11]=0;g[15]=1;return g};p.frustum=function(b,a,c,d,e,f,g){null==f&&(f=1);null==e&&(e=-1);var h=1/(d-c),k=1/(e-f);g[0]=1/(a-b)*e*2;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2*e*h;g[6]=
0;g[7]=0;g[8]=(a+b)*h;g[9]=(d+c)*h;g[10]=(f+e)*k;g[11]=-1;g[12]=0;g[13]=0;g[14]=f*e*2*k;g[15]=0;return g};var v=function(){};v.__name__=!0;v.i32ToFloat=function(b){var a=b>>>23&255,c=b&8388607;return 0==c&&0==a?0:(1-(b>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,a-127)};v.floatToI32=function(b){if(0==b)return 0;var a=0>b?-b:b,c=Math.floor(Math.log(a)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);a=Math.round(8388608*(a/Math.pow(2,c)-1));8388608==a&&128>c&&(a=0,++c);return(0>b?-2147483648:0)|c+127<<
23|a};var m={__ename__:!0,__constructs__:["NoIntersection","FoundIntersection","StillEvolving"],NoIntersection:["NoIntersection",0]};m.NoIntersection.__enum__=m;m.FoundIntersection=["FoundIntersection",1];m.FoundIntersection.__enum__=m;m.StillEvolving=["StillEvolving",2];m.StillEvolving.__enum__=m;var B=function(){this.maxIterations=20};B.__name__=!0;B.prototype={calculateSupport:function(b){var a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[0]=-1*b[0];a[1]=-1*b[1];a[2]=-1*b[2];var c=this.shapeA.support(b);b=
new h(4);b[0]=0;b[1]=0;b[2]=0;b[0]=c[0];b[1]=c[1];b[2]=c[2];a=this.shapeB.support(a);b[0]-=a[0];b[1]-=a[1];b[2]-=a[2];return b},addSupport:function(b){var a=this.calculateSupport(b);this.vertices.push(a);return 0<=b[0]*a[0]+b[1]*a[1]+b[2]*a[2]},evolveSimplex:function(){switch(this.vertices.length){case 0:var b=this.shapeB.get_centre(),a=this.shapeA.get_centre(),c=new h(4);c[0]=0;c[1]=0;c[2]=0;c[0]=b[0]-a[0];c[1]=b[1]-a[1];c[2]=b[2]-a[2];this.direction=c;break;case 1:b=this.direction;a=new h(4);a[0]=
0;a[1]=0;a[2]=0;a[0]=-1*b[0];a[1]=-1*b[1];a[2]=-1*b[2];this.direction=a;break;case 2:a=this.vertices[1];c=this.vertices[0];b=new h(4);b[0]=0;b[1]=0;b[2]=0;b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];c=this.vertices[0];a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[0]=-1*c[0];a[1]=-1*c[1];a[2]=-1*c[2];c=new h(4);c[0]=0;c[1]=0;c[2]=0;c=new h(4);c[0]=b[1]*a[2]-b[2]*a[1];c[1]=b[2]*a[0]-b[0]*a[2];c[2]=b[0]*a[1]-b[1]*a[0];a=c;c=new h(4);c[0]=a[1]*b[2]-a[2]*b[1];c[1]=a[2]*b[0]-a[0]*b[2];c[2]=a[0]*b[1]-a[1]*b[0];this.direction=
c;break;case 3:a=this.vertices[2];c=this.vertices[0];b=new h(4);b[0]=0;b[1]=0;b[2]=0;b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];var c=this.vertices[1],d=this.vertices[0],a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[0]=c[0]-d[0];a[1]=c[1]-d[1];a[2]=c[2]-d[2];c=new h(4);c[0]=0;c[1]=0;c[2]=0;c=new h(4);c[0]=b[1]*a[2]-b[2]*a[1];c[1]=b[2]*a[0]-b[0]*a[2];c[2]=b[0]*a[1]-b[1]*a[0];this.direction=c;a=this.vertices[0];b=new h(4);b[0]=0;b[1]=0;b[2]=0;b[0]=-1*a[0];b[1]=-1*a[1];b[2]=-1*a[2];a=this.direction;0>a[0]*b[0]+
a[1]*b[1]+a[2]*b[2]&&(b=this.direction,a=new h(4),a[0]=0,a[1]=0,a[2]=0,a[0]=-1*b[0],a[1]=-1*b[1],a[2]=-1*b[2],this.direction=a);break;case 4:a=this.vertices[3];c=this.vertices[0];b=new h(4);b[0]=0;b[1]=0;b[2]=0;b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];a=this.vertices[3];d=this.vertices[1];c=new h(4);c[0]=0;c[1]=0;c[2]=0;c[0]=a[0]-d[0];c[1]=a[1]-d[1];c[2]=a[2]-d[2];var d=this.vertices[3],e=this.vertices[2],a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[0]=d[0]-e[0];a[1]=d[1]-e[1];a[2]=d[2]-e[2];e=this.vertices[3];
d=new h(4);d[0]=0;d[1]=0;d[2]=0;d[0]=-1*e[0];d[1]=-1*e[1];d[2]=-1*e[2];e=new h(4);e[0]=0;e[1]=0;e[2]=0;e=new h(4);e[0]=b[1]*c[2]-b[2]*c[1];e[1]=b[2]*c[0]-b[0]*c[2];e[2]=b[0]*c[1]-b[1]*c[0];var f=new h(4);f[0]=0;f[1]=0;f[2]=0;f=new h(4);f[0]=c[1]*a[2]-c[2]*a[1];f[1]=c[2]*a[0]-c[0]*a[2];f[2]=c[0]*a[1]-c[1]*a[0];c=f;f=new h(4);f[0]=0;f[1]=0;f[2]=0;f=new h(4);f[0]=a[1]*b[2]-a[2]*b[1];f[1]=a[2]*b[0]-a[0]*b[2];f[2]=a[0]*b[1]-a[1]*b[0];b=f;if(0<e[0]*d[0]+e[1]*d[1]+e[2]*d[2])u.remove(this.vertices,this.vertices[2]),
this.direction=e;else if(0<c[0]*d[0]+c[1]*d[1]+c[2]*d[2])u.remove(this.vertices,this.vertices[0]),this.direction=c;else if(0<b[0]*d[0]+b[1]*d[1]+b[2]*d[2])u.remove(this.vertices,this.vertices[1]),this.direction=b;else return m.FoundIntersection;break;default:throw new q("Can't have simplex with "+this.vertices.length+" verts!");}return this.addSupport(this.direction)?m.StillEvolving:m.NoIntersection},test:function(b,a){this.vertices=[];this.shapeA=b;this.shapeB=a;for(var c=m.StillEvolving,d=0;d<this.maxIterations&&
c==m.StillEvolving;)c=this.evolveSimplex(),++d;return c==m.FoundIntersection},__class__:B};var z=function(){};z.__name__=!0;z.prototype={__class__:z};var x=function(b){this.vertices=b};x.__name__=!0;x.__interfaces__=[z];x.prototype={get_centre:function(){var b=new h(4);b[0]=0;b[1]=0;for(var a=b[2]=0,c=0,d=this.vertices;c<d.length;){var e=d[c];++c;b[0]+=e[0];b[1]+=e[1];b[2]+=e[2];a+=1}a=1/a;b[0]*=a;b[1]*=a;b[2]*=a;return b},set_centre:function(b){var a=this.get_centre();a[0]=b[0]-a[0];a[1]=b[1]-a[1];
a[2]=b[2]-a[2];for(var c=0,d=this.vertices;c<d.length;){var e=d[c];++c;e[0]+=a[0];e[1]+=a[1];e[2]+=a[2]}return b},support:function(b){for(var a=-Infinity,c=null,d=0,e=this.vertices;d<e.length;){var f=e[d];++d;var g=f[0]*b[0]+f[1]*b[1]+f[2]*b[2];g>a&&(a=g,c=f)}return c},__class__:x};var y=function(b,a){this.set_centre(b);this.radius=a};y.__name__=!0;y.__interfaces__=[z];y.prototype={get_centre:function(){return this._centre},set_centre:function(b){return this._centre=b},support:function(b){var a=this.get_centre(),
c=new h(4);c[0]=0;c[1]=0;c[2]=0;c[0]=a[0];c[1]=a[1];c[2]=a[2];a=new h(4);a[0]=0;a[1]=0;a[2]=0;var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]),e=0;d>=p.EPSILON&&(e=1/d);a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;b=this.radius;a[0]*=b;a[1]*=b;a[2]*=b;c[0]+=a[0];c[1]+=a[1];c[2]+=a[2];return c},__class__:y};var q=function(b){Error.call(this);this.val=b;this.message=String(b);Error.captureStackTrace&&Error.captureStackTrace(this,q)};q.__name__=!0;q.wrap=function(b){return b instanceof Error?b:new q(b)};q.__super__=
Error;q.prototype=function(b,a){function c(){}c.prototype=b;var d=new c,e;for(e in a)d[e]=a[e];a.toString!==Object.prototype.toString&&(d.toString=a.toString);return d}(Error.prototype,{__class__:q});var k=function(){};k.__name__=!0;k.getClass=function(b){if(b instanceof Array&&null==b.__enum__)return Array;var a=b.__class__;if(null!=a)return a;b=k.__nativeClassName(b);return null!=b?k.__resolveNativeClass(b):null};k.__string_rec=function(b,a){if(null==b)return"null";if(5<=a.length)return"<...>";
var c=typeof b;"function"==c&&(b.__name__||b.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(b instanceof Array){if(b.__enum__){if(2==b.length)return b[0];c=b[0]+"(";a+="\t";for(var d=2,e=b.length;d<e;)var f=d++,c=2!=f?c+(","+k.__string_rec(b[f],a)):c+k.__string_rec(b[f],a);return c+")"}c=b.length;d="[";a+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+k.__string_rec(b[f],a);return d+"]"}try{d=b.toString}catch(g){return"???"}if(null!=d&&d!=Object.toString&&"function"==
typeof d&&(c=b.toString(),"[object Object]"!=c))return c;c=null;d="{\n";a+="\t";e=null!=b.hasOwnProperty;for(c in b)e&&!b.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=a+c+" : "+k.__string_rec(b[c],a));a=a.substring(1);return d+("\n"+a+"}");case "string":return b;default:return String(b)}};k.__interfLoop=function(b,a){if(null==b)return!1;if(b==a)return!0;var c=b.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<
e;){var f=d++,f=c[f];if(f==a||k.__interfLoop(f,a))return!0}return k.__interfLoop(b.__super__,a)};k.__instanceof=function(b,a){if(null==a)return!1;switch(a){case Array:return b instanceof Array?null==b.__enum__:!1;case H:return"boolean"==typeof b;case K:return!0;case I:return"number"==typeof b;case L:return"number"==typeof b?(b|0)===b:!1;case String:return"string"==typeof b;default:if(null!=b)if("function"==typeof a){if(b instanceof a||k.__interfLoop(k.getClass(b),a))return!0}else{if("object"==typeof a&&
k.__isNativeObj(a)&&b instanceof a)return!0}else return!1;return a==M&&null!=b.__name__||a==N&&null!=b.__ename__?!0:b.__enum__==a}};k.__nativeClassName=function(b){b=k.__toStr.call(b).slice(8,-1);return"Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b};k.__isNativeObj=function(b){return null!=k.__nativeClassName(b)};k.__resolveNativeClass=function(b){return A[b]};var l=function(b){if(b instanceof Array&&null==b.__enum__)this.a=b,this.byteLength=b.length;else{this.a=[];for(var a=0;a<b;){var c=
a++;this.a[c]=0}this.byteLength=b}};l.__name__=!0;l.sliceImpl=function(b,a){var c=new J(this,b,null==a?null:a-b),d=new G(c.byteLength);(new J(d)).set(c);return d};l.prototype={slice:function(b,a){return new l(this.a.slice(b,a))},__class__:l};var r=function(){};r.__name__=!0;r._new=function(b,a,c){var d;if("number"==typeof b){d=[];for(a=0;a<b;){var e=a++;d[e]=0}d.byteLength=d.length<<2;d.byteOffset=0;b=[];a=0;for(e=d.length<<2;a<e;)a++,b.push(0);d.buffer=new l(b)}else if(k.__instanceof(b,l)){null==
a&&(a=0);null==c&&(c=b.byteLength-a>>2);d=[];for(e=0;e<c;){e++;var f=b.a[a++]|b.a[a++]<<8|b.a[a++]<<16|b.a[a++]<<24;d.push(v.i32ToFloat(f))}d.byteLength=d.length<<2;d.byteOffset=a;d.buffer=b}else if(b instanceof Array&&null==b.__enum__){d=b.slice();b=[];for(a=0;a<d.length;)e=d[a],++a,e=v.floatToI32(e),b.push(e&255),b.push(e>>8&255),b.push(e>>16&255),b.push(e>>>24);d.byteLength=d.length<<2;d.byteOffset=0;d.buffer=new l(b)}else throw new q("TODO "+E.string(b));d.subarray=r._subarray;d.set=r._set;return d};
r._set=function(b,a){if(k.__instanceof(b.buffer,l)){if(b.byteLength+a>this.byteLength)throw new q("set() outside of range");for(var c=0,d=b.byteLength;c<d;){var e=c++;this[e+a]=b[e]}}else if(b instanceof Array&&null==b.__enum__){if(b.length+a>this.byteLength)throw new q("set() outside of range");c=0;for(d=b.length;c<d;)e=c++,this[e+a]=b[e]}else throw new q("TODO");};r._subarray=function(b,a){var c=r._new(this.slice(b,a));c.byteOffset=4*b;return c};var t=function(){};t.__name__=!0;t._new=function(b,
a,c){if("number"==typeof b){c=[];for(a=0;a<b;){var d=a++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new l(c)}else if(k.__instanceof(b,l))null==a&&(a=0),null==c&&(c=b.byteLength-a),c=0==a?b.a:b.a.slice(a,a+c),c.byteLength=c.length,c.byteOffset=a,c.buffer=b;else if(b instanceof Array&&null==b.__enum__)c=b.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new l(c);else throw new q("TODO "+E.string(b));c.subarray=t._subarray;c.set=t._set;return c};t._set=function(b,a){if(k.__instanceof(b.buffer,
l)){if(b.byteLength+a>this.byteLength)throw new q("set() outside of range");for(var c=0,d=b.byteLength;c<d;){var e=c++;this[e+a]=b[e]}}else if(b instanceof Array&&null==b.__enum__){if(b.length+a>this.byteLength)throw new q("set() outside of range");c=0;for(d=b.length;c<d;)e=c++,this[e+a]=b[e]}else throw new q("TODO");};t._subarray=function(b,a){var c=t._new(this.slice(b,a));c.byteOffset=b;return c};String.prototype.__class__=String;String.__name__=!0;Array.__name__=!0;var L={__name__:["Int"]},K={__name__:["Dynamic"]},
I=Number;I.__name__=["Float"];var H=Boolean;H.__ename__=["Bool"];var M={__name__:["Class"]},N={},G=A.ArrayBuffer||l;null==G.prototype.slice&&(G.prototype.slice=l.sliceImpl);var h=A.Float32Array||r._new,J=A.Uint8Array||t._new;p.EPSILON=1E-7;k.__toStr={}.toString;r.BYTES_PER_ELEMENT=4;t.BYTES_PER_ELEMENT=1;F.main()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
